<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>–®–∫–æ–ª—å–Ω—ã–π –ß–∞—Ç</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
  <!-- –≠–∫—Ä–∞–Ω –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞ -->
  <div id="mobile-view" style="display: none; padding: 20px; background: #000; color: white;">
    <h2>üì® –®–∫–æ–ª—å–Ω—ã–π –ß–∞—Ç</h2>

    <button id="idea">üí° –ò–¥–µ—è</button><br>
    <button id="question">‚ùì –í–æ–ø—Ä–æ—Å</button><br>
    <button id="complaint">‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∞</button><br><br>

    <textarea id="text" placeholder="–û–ø–∏—à–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–æ..." rows="5"></textarea><br><br>

    <button id="send">‚úÖ –û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
  </div>

  <!-- –≠–∫—Ä–∞–Ω –¥–ª—è –ü–ö -->
  <div id="desktop-view" style="display: block; padding: 40px; background: #000; color: white; text-align: center;">
    <h2>üì± –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ —Å –º–æ–±–∏–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ Telegram</h2>
    <p>–û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ, —á—Ç–æ–±—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –æ–±—Ä–∞—â–µ–Ω–∏–µ.</p>
  </div>

  <script>
    // –û–ø—Ä–µ–¥–µ–ª—è–µ–º, –º–æ–±–∏–ª—å–Ω–æ–µ –ª–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
    const isMobile = /Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);

    if (isMobile) {
      document.getElementById('mobile-view').style.display = 'block';
      document.getElementById('desktop-view').style.display = 'none';

      let category = 'idea';

      document.getElementById('idea').addEventListener('click', () => category = 'idea');
      document.getElementById('question').addEventListener('click', () => category = 'question');
      document.getElementById('complaint').addEventListener('click', () => category = 'complaint');

      document.getElementById('send').addEventListener('click', () => {
        const text = document.getElementById('text').value.trim();
        if (!text) {
          if (window.Telegram && Telegram.WebApp) {
            Telegram.WebApp.showAlert('–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç!');
          } else {
            alert('–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç!');
          }
          return;
        }

        const anonId = 'STU-' + Math.random().toString(36).substring(2, 8).toUpperCase();

        if (window.Telegram && Telegram.WebApp) {
          Telegram.WebApp.sendData(JSON.stringify({
            action: 'submit',
            anonymous_id: anonId,
            type: category,
            text: text
          }));
        }
      });

      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp
      if (window.Telegram && Telegram.WebApp) {
        Telegram.WebApp.ready();
        Telegram.WebApp.expand();
      }
    } else {
      // –ï—Å–ª–∏ –Ω–µ –º–æ–±–∏–ª—å–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ ‚Äî –æ—Å—Ç–∞–≤–ª—è–µ–º desktop-view
    }
  </script>
</body>
</html>
